# ูุธุงู ุงูููุชุฌุงุช ุงูููุถูุฉ - ูููุงุฑุฏ

## ุงูููุฏูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุชูุงูู ููููุชุฌุงุช ุงูููุถูุฉ ูุณูุญ ูููุณุชุฎุฏููู ุจุญูุธ ุงูููุชุฌุงุช ุงูุชู ููุชููู ุจูุง ูุงููุตูู ุฅูููุง ุจุณูููุฉ.

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช (`favorites-system-setup.sql`)

#### ุฌุฏูู `user_favorites`:
```sql
CREATE TABLE user_favorites (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    product_id UUID REFERENCES products(id),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(user_id, product_id)
);
```

#### ุงูุฏูุงู ุงููุชุงุญุฉ:
- `add_to_favorites(user_id, product_id)` - ุฅุถุงูุฉ ููุชุฌ ููููุถูุฉ
- `remove_from_favorites(user_id, product_id)` - ุฅุฒุงูุฉ ููุชุฌ ูู ุงูููุถูุฉ
- `toggle_favorite(user_id, product_id)` - ุชุจุฏูู ุญุงูุฉ ุงูููุถูุฉ
- `get_user_favorites(user_id)` - ุฌูุจ ููุชุฌุงุช ุงููุณุชุฎุฏู ุงูููุถูุฉ
- `is_product_favorite(user_id, product_id)` - ูุญุต ุฅุฐุง ูุงู ุงูููุชุฌ ููุถู
- `get_favorites_count(user_id)` - ุนุฏุฏ ุงูููุชุฌุงุช ุงูููุถูุฉ

### 2. ูุฏูุฑ ุงูููุถูุฉ (`lib/favorites-manager.ts`)

#### ุงูููุฒุงุช:
- โ **ุฅุฏุงุฑุฉ ุดุงููุฉ**: ุฅุถุงูุฉุ ุญุฐูุ ุชุจุฏูู ุญุงูุฉ ุงูููุถูุฉ
- โ **ูุญุต ุงูุญุงูุฉ**: ุงูุชุญูู ูู ููู ุงูููุชุฌ ููุถู ุฃู ูุง
- โ **ุฌูุจ ุงูุจูุงูุงุช**: ุงุณุชุฑุฌุงุน ูุงุฆูุฉ ุงูููุชุฌุงุช ุงูููุถูุฉ
- โ **ุฅุญุตุงุฆูุงุช**: ุนุฏุฏ ุงูููุชุฌุงุช ุงูููุถูุฉ
- โ **ุฃูุงู**: ุฑุจุท ุจูุธุงู ุงููุตุงุฏูุฉ ุงูุญุงูู

#### ุงูุฏูุงู ุงูุฑุฆูุณูุฉ:
```typescript
// ุฅุถุงูุฉ ููุชุฌ ููููุถูุฉ
addToFavorites(productId: string): Promise<FavoriteResult>

// ุฅุฒุงูุฉ ููุชุฌ ูู ุงูููุถูุฉ
removeFromFavorites(productId: string): Promise<FavoriteResult>

// ุชุจุฏูู ุญุงูุฉ ุงูููุถูุฉ
toggleFavorite(productId: string): Promise<FavoriteResult>

// ูุญุต ุฅุฐุง ูุงู ุงูููุชุฌ ููุถู
isFavorite(productId: string): Promise<boolean>

// ุฌูุจ ุฌููุน ุงูููุชุฌุงุช ุงูููุถูุฉ
getFavorites(): Promise<FavoriteProduct[]>

// ุนุฏุฏ ุงูููุชุฌุงุช ุงูููุถูุฉ
getFavoritesCount(): Promise<number>
```

### 3. ูููู ุฒุฑ ุงูููุถูุฉ (`components/FavoriteButton.tsx`)

#### ุงูููุฒุงุช:
- ๐จ **ุชุตููู ุชูุงุนูู**: ูุชุบูุฑ ุดูู ุงูุฒุฑ ุญุณุจ ุงูุญุงูุฉ
- โก **ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ**: ุชุญุฏูุซ ููุฑู ููุญุงูุฉ
- ๐ฑ **ูุงุจู ููุชุฎุตูุต**: ุญุฌูุ ูููุนุ ุฑุณุงุฆู ูุงุจูุฉ ููุชุนุฏูู
- ๐ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู

#### ุงูุฎุตุงุฆุต:
```typescript
interface FavoriteButtonProps {
  productId: string;        // ูุนุฑู ุงูููุชุฌ
  size?: number;           // ุญุฌู ุงูุฃููููุฉ (ุงูุชุฑุงุถู: 24)
  onToggle?: (isFavorite: boolean) => void; // ุฏุงูุฉ ุนูุฏ ุงูุชุบููุฑ
  showToast?: boolean;     // ุนุฑุถ ุฑุณุงุฆู ุงูุชุฃููุฏ (ุงูุชุฑุงุถู: true)
  style?: any;            // ุชูุณูู ุฅุถุงูู
}
```

## ุงูุชูุงูู ูุน ุงูุตูุญุงุช

### 1. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`app/store-owner/index.tsx`)
- โ ุฒุฑ ุงูููุถูุฉ ุนูู ูู ุจุทุงูุฉ ููุชุฌ
- โ ููุถุน ูู ุงูุฒุงููุฉ ุงูุนูููุฉ ุงููููู ููุตูุฑุฉ
- โ ุจุฏูู ุฑุณุงุฆู ุชุฃููุฏ ูุชุฌูุจ ุงูุฅุฒุนุงุฌ

### 2. ุตูุญุฉ ุงูุจุญุซ (`app/store-owner/search.tsx`)
- โ ุฒุฑ ุงูููุถูุฉ ูู ูุชุงุฆุฌ ุงูุจุญุซ
- โ ุชุตููู ูุชุณู ูุน ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ ุชูุงุนู ุณูุณ ูุน ุงูุจุญุซ

### 3. ุตูุญุฉ ุงูููุถูุฉ (`app/store-owner/favorites.tsx`)
- โ ุนุฑุถ ุงูููุชุฌุงุช ุงูููุถูุฉ ุงูุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅููุงููุฉ ุฅุฒุงูุฉ ุงูููุชุฌุงุช ูู ุงูููุถูุฉ
- โ ุชุญุฏูุซ ุงููุงุฆูุฉ ุชููุงุฆูุงู ุนูุฏ ุงูุฅุฒุงูุฉ
- โ ุฑุณุงุฆู ูุงุถุญุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ููุถูุฉ

## ููููุฉ ุนูู ุงููุธุงู

### 1. ุฅุถุงูุฉ ููุชุฌ ููููุถูุฉ:
```mermaid
graph TD
    A[ุงููุณุชุฎุฏู ูุถุบุท ุฒุฑ ุงูููุจ] --> B[ูุญุต ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู]
    B --> C{ูุณุฌู ุฏุฎููุ}
    C -->|ูุง| D[ุฑุณุงูุฉ: ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู]
    C -->|ูุนู| E[ุฅุฑุณุงู ุทูุจ ููุงุนุฏุฉ ุงูุจูุงูุงุช]
    E --> F[ุฅุถุงูุฉ ุณุฌู ูู user_favorites]
    F --> G[ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู]
    G --> H[ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ]
```

### 2. ุฅุฒุงูุฉ ููุชุฌ ูู ุงูููุถูุฉ:
```mermaid
graph TD
    A[ุงููุณุชุฎุฏู ูุถุบุท ุฒุฑ ุงูููุจ ุงูููููุก] --> B[ุฅุฑุณุงู ุทูุจ ุฅุฒุงูุฉ]
    B --> C[ุญุฐู ุงูุณุฌู ูู user_favorites]
    C --> D[ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู]
    D --> E[ุนุฑุถ ุฑุณุงูุฉ ุชุฃููุฏ ุงูุฅุฒุงูุฉ]
```

### 3. ุนุฑุถ ุงูููุถูุฉ:
```mermaid
graph TD
    A[ูุชุญ ุตูุญุฉ ุงูููุถูุฉ] --> B[ุฌูุจ ูุนุฑู ุงููุณุชุฎุฏู]
    B --> C[ุงุณุชุนูุงู get_user_favorites]
    C --> D[ุฌูุจ ุชูุงุตูู ุงูููุชุฌุงุช]
    D --> E[ุนุฑุถ ุงููุงุฆูุฉ ูุน ุฃุฒุฑุงุฑ ุงูุฅุฒุงูุฉ]
```

## ุงูุชุตููู ูุงูุชุฌุฑุจุฉ

### 1. ููุงุถุน ุงูุฃุฒุฑุงุฑ:
- **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ**: ุฒุงููุฉ ุนูููุฉ ูููู ูู ุตูุฑุฉ ุงูููุชุฌ
- **ุตูุญุฉ ุงูุจุญุซ**: ููุณ ุงูููุถุน ููุชูุงุณู
- **ุตูุญุฉ ุงูููุถูุฉ**: ูุน ุฅููุงููุฉ ุงูุฅุฒุงูุฉ ุงููุจุงุดุฑุฉ

### 2. ุงูุฃููุงู ูุงูุฃููููุงุช:
- **ุบูุฑ ููุถู**: `favorite-border` ุจุงูููู ุงูุฑูุงุฏู (#999)
- **ููุถู**: `favorite` ุจุงูููู ุงูุจุฑุชูุงูู (#FF6B35)
- **ุฎูููุฉ ุงูุฒุฑ**: ุฃุจูุถ ุดูุงู ูุน ุธู ุฎููู

### 3. ุงูุชูุงุนู:
- ุชุฃุซูุฑ ุงูููุณ: ุดูุงููุฉ 70%
- ุชุญุฏูุซ ููุฑู ููุญุงูุฉ
- ุฑุณุงุฆู ุชุฃููุฏ ุงุฎุชูุงุฑูุฉ

## ุงูุฃูุงู ูุงูุฃุฏุงุก

### 1. ุงูุฃูุงู:
- โ **RLS ููุนู**: ูู ูุณุชุฎุฏู ูุฑู ููุถูุชู ููุท
- โ **ุงูุชุญูู ูู ุงููููุฉ**: ุฑุจุท ุจูุธุงู ุงููุตุงุฏูุฉ
- โ **ููุน ุงูุชูุฑุงุฑ**: ููุฏ unique ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุงูุฃุฏุงุก:
- โ **ููุฑุณุฉ ูุญุณูุฉ**: ุนูู user_id ู product_id
- โ **ุงุณุชุนูุงูุงุช ูุญุณูุฉ**: ุฌูุจ ุงูุจูุงูุงุช ุงููุทููุจุฉ ููุท
- โ **ุชุฎุฒูู ูุคูุช**: ุญุงูุฉ ูุญููุฉ ููุงุณุชุฌุงุจุฉ ุงูุณุฑูุนุฉ

## ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

### 1. ุงูุญุงูุงุช ุงููุฎุชููุฉ:
- **ูุณุชุฎุฏู ุฌุฏูุฏ**: ุฑุณุงูุฉ ุชุฑุญูุจ ูุชูุฌูู ููุชุตูุญ
- **ูุง ุชูุฌุฏ ููุถูุฉ**: ุดุงุดุฉ ูุงุฑุบุฉ ูุน ุฏุนูุฉ ููุชุตูุญ
- **ููุถูุฉ ูุชููุฑุฉ**: ุนุฑุถ ููุธู ูุน ุฅููุงููุฉ ุงูุฅุฏุงุฑุฉ

### 2. ุงูุฑุณุงุฆู:
- **ุฅุถุงูุฉ ูุงุฌุญุฉ**: "ุชู ุฅุถุงูุฉ ุงูููุชุฌ ุฅูู ุงูููุถูุฉ"
- **ุฅุฒุงูุฉ ูุงุฌุญุฉ**: "ุชู ุฅุฒุงูุฉ ุงูููุชุฌ ูู ุงูููุถูุฉ"
- **ุฎุทุฃ**: ุฑุณุงุฆู ูุงุถุญุฉ ูุน ุงูุชุฑุงุญุงุช ุงูุญู

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ุชุญุณููุงุช ูุฎุทุทุฉ:
- ๐ **ูุฒุงููุฉ ูุชูุฏูุฉ**: ุชุญุฏูุซ ููุฑู ุนุจุฑ ุงูุตูุญุงุช
- ๐ **ุฅุญุตุงุฆูุงุช**: ุฃุดูุฑ ุงูููุชุฌุงุช ุงูููุถูุฉ
- ๐ **ุฅุดุนุงุฑุงุช**: ุชูุจููุงุช ุนูุฏ ุชููุฑ ููุชุฌุงุช ููุถูุฉ
- ๐ **ูุฌููุนุงุช**: ุชูุธูู ุงูููุถูุฉ ูู ูุฌูุฏุงุช
- ๐ฏ **ุงูุชุฑุงุญุงุช**: ููุชุฌุงุช ูุดุงุจูุฉ ููููุถูุฉ

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุทูุฑูู:

#### ุฅุถุงูุฉ ุฒุฑ ุงูููุถูุฉ:
```tsx
import FavoriteButton from '@/components/FavoriteButton';

<FavoriteButton 
  productId={product.id}
  size={20}
  onToggle={(isFavorite) => console.log('ุชูุบู:', isFavorite)}
  showToast={true}
/>
```

#### ุงุณุชุฎุฏุงู ูุฏูุฑ ุงูููุถูุฉ:
```typescript
import { favoritesManager } from '@/lib/favorites-manager';

// ุฅุถุงูุฉ ููููุถูุฉ
const result = await favoritesManager.addToFavorites(productId);

// ุฌูุจ ุงูููุถูุฉ
const favorites = await favoritesManager.getFavorites();

// ูุญุต ุญุงูุฉ ุงูููุถูุฉ
const isFav = await favoritesManager.isFavorite(productId);
```

## ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฎุทูุงุช:
1. **ุชุดุบูู ููู SQL**:
   ```sql
   -- ูู Supabase SQL Editor
   -- ุงูุณุฎ ูุงูุตู ูุญุชููุงุช favorites-system-setup.sql
   ```

2. **ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ**:
   ```sql
   -- ูุญุต ุงูุฌุฏูู
   SELECT * FROM user_favorites LIMIT 5;
   
   -- ูุญุต ุงูุฏูุงู
   SELECT proname FROM pg_proc WHERE proname LIKE '%favorite%';
   ```

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐ 