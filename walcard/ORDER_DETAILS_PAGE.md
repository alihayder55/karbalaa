# صفحة تفاصيل الطلب - Order Details Page

## نظرة عامة
تم تطوير صفحة تفاصيل الطلب بشكل كامل مع التصميم الجديد باللون التركوازي. الصفحة تعرض جميع تفاصيل الطلب وتتيح لصاحب المحل تحديث حالة الطلب.

## الميزات الرئيسية

### 1. عرض حالة الطلب
- **شريحة الحالة**: تعرض حالة الطلب مع أيقونة ولون مميز
- **أرقام الطلب**: عرض رقم الطلب وتاريخ الإنشاء
- **الألوان المميزة**:
  - في الانتظار: برتقالي
  - مؤكد: تركوازي
  - قيد التحضير: أخضر فاتح
  - تم الشحن: أخضر
  - تم التوصيل: أخضر
  - ملغي: أحمر

### 2. معلومات العميل
- اسم العميل
- رقم الهاتف
- عنوان التوصيل (إذا كان متوفراً)

### 3. المنتجات المطلوبة
- قائمة بجميع المنتجات في الطلب
- صورة المنتج (أو أيقونة بديلة)
- اسم المنتج ووصفه
- الكمية المطلوبة
- السعر عند الطلب

### 4. ملخص الطلب
- عدد المنتجات
- إجمالي الكمية
- المجموع الكلي

### 5. ملاحظات التوصيل
- عرض ملاحظات التوصيل إذا كانت موجودة

### 6. تحديث حالة الطلب
- **أزرار تفاعلية** لتحديث الحالة:
  - تأكيد الطلب (من في الانتظار)
  - بدء التحضير (من مؤكد)
  - تم الشحن (من قيد التحضير)
  - تم التوصيل (من تم الشحن)
  - إلغاء الطلب (لجميع الحالات ما عدا المكتمل والملغي)

## التصميم

### الألوان المستخدمة
- **اللون الرئيسي**: `#40E0D0` (تركوازي)
- **الخلفية**: `#f8f9fa` (رمادي فاتح)
- **البطاقات**: أبيض مع ظلال خفيفة
- **النصوص**: `#333` للعناوين، `#666` للنصوص الفرعية

### العناصر البصرية
- **البطاقات**: تصميم بطاقات مع ظلال وحواف مدورة
- **الأيقونات**: Material Icons مع ألوان مميزة
- **الأزرار**: تصميم أزرار ملونة مع أيقونات
- **التخطيط**: تخطيط عمودي مع مسافات مناسبة

## الوظائف التقنية

### 1. تحميل البيانات
```typescript
const loadOrderDetails = async () => {
  // تحميل تفاصيل الطلب من قاعدة البيانات
  // تحميل عناصر الطلب مع معلومات المنتجات
}
```

### 2. تحديث الحالة
```typescript
const handleUpdateStatus = async (newStatus: string) => {
  // تحديث حالة الطلب في قاعدة البيانات
  // إعادة تحميل البيانات بعد التحديث
}
```

### 3. تنسيق البيانات
- تنسيق الأسعار بالعملة العراقية
- تنسيق التواريخ باللغة العربية
- عرض الأرقام بتنسيق مقروء

## حالات العرض

### 1. حالة التحميل
- مؤشر تحميل دوار
- نص "جاري تحميل تفاصيل الطلب..."

### 2. حالة الخطأ
- أيقونة خطأ
- رسالة خطأ واضحة
- زر العودة

### 3. حالة عدم وجود طلب
- رسالة "لم يتم العثور على الطلب"
- زر العودة

## التنقل

### Header
- زر العودة للصفحة السابقة
- عنوان "تفاصيل الطلب"
- زر الطباعة (للمستقبل)

### الأزرار التفاعلية
- أزرار تحديث الحالة حسب الحالة الحالية
- زر إلغاء الطلب متاح لجميع الحالات غير المكتملة

## قاعدة البيانات

### الجداول المستخدمة
- `orders`: تفاصيل الطلب الرئيسية
- `order_items`: عناصر الطلب
- `products`: معلومات المنتجات

### الحقول المطلوبة
```sql
-- orders table
id, status, total_price, delivery_address, delivery_notes, 
created_at, updated_at, customer_name, customer_phone

-- order_items table
id, product_id, quantity, price_at_order, order_id

-- products table (joined)
name, image_url, description
```

## الاختبار

### خطوات الاختبار
1. فتح صفحة الطلبات
2. الضغط على أي طلب
3. التحقق من عرض جميع التفاصيل
4. تجربة تحديث حالة الطلب
5. التحقق من تحديث الواجهة

### النقاط المهمة
- التأكد من تحميل البيانات بشكل صحيح
- التحقق من عمل أزرار تحديث الحالة
- التأكد من عرض الأخطاء بشكل مناسب
- اختبار التنقل بين الصفحات

## التحسينات المستقبلية

### 1. إشعارات
- إرسال إشعارات للعميل عند تحديث الحالة
- إشعارات لصاحب المحل للطلبات الجديدة

### 2. الطباعة
- إضافة وظيفة طباعة الطلب
- تصدير الطلب كـ PDF

### 3. التواصل
- إضافة وظيفة التواصل مع العميل
- إرسال رسائل نصية للعميل

### 4. التتبع
- إضافة خريطة لتتبع التوصيل
- عرض موقع التوصيل

## الملفات المتأثرة
- `walcard/app/store-owner/(modals)/order-details.tsx`: الصفحة الرئيسية
- `walcard/app/store-owner/orders.tsx`: صفحة الطلبات (للتنقل)

## الملاحظات
- الصفحة تستخدم `useLocalSearchParams` للحصول على معرف الطلب
- جميع الألوان متوافقة مع التصميم الجديد
- الكود يدعم الأخطاء ويعرض رسائل مناسبة
- الواجهة متجاوبة ومصممة للاستخدام على الهاتف 