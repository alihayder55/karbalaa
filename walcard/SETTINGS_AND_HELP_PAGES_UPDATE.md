# تحديث صفحات الإعدادات والمساعدة

## نظرة عامة
تم تطوير صفحات الإعدادات وتعديل الملف الشخصي والمساعدة بشكل كامل مع ربط قاعدة البيانات والتصميم الجديد باللون التركوازي.

## الصفحات المحدثة

### 1. صفحة تعديل الملف الشخصي (`edit-profile.tsx`)

#### الميزات الجديدة:
- **ربط قاعدة البيانات**: تحميل وحفظ بيانات المستخدم من جدول `store_owners`
- **تصميم حديث**: واجهة مستخدم محسنة باللون التركوازي
- **أقسام منظمة**:
  - معلومات شخصية
  - معلومات المحل
  - معلومات التواصل
  - معلومات العنوان
  - أوقات العمل
- **التحقق من صحة البيانات**: التأكد من إدخال الحقول المطلوبة
- **حفظ تلقائي**: حفظ التغييرات في قاعدة البيانات
- **صورة المحل**: إمكانية إضافة صورة للمحل

#### الحقول المدعومة:
- الاسم الكامل
- اسم الشركة
- اسم المحل
- رقم الهاتف
- رقم الواتساب
- نوع المحل
- نوع النشاط التجاري
- العنوان
- المدينة
- المنطقة
- أقرب معلم
- وقت الفتح والإغلاق

### 2. صفحة الإعدادات (`settings.tsx`)

#### الميزات الجديدة:
- **ربط قاعدة البيانات**: حفظ إعدادات المستخدم في جدول `user_settings`
- **أقسام منظمة**:
  - إعدادات الإشعارات
  - البيانات والنسخ الاحتياطي
  - المظهر
  - الحساب
  - الدعم والمساعدة
- **مفاتيح تبديل تفاعلية**: للتحكم في الإعدادات المختلفة
- **تسجيل الخروج**: مع تأكيد من المستخدم

#### الإعدادات المدعومة:
- تفعيل الإشعارات
- إشعارات البريد الإلكتروني
- إشعارات التطبيق
- النسخ الاحتياطي التلقائي
- الوضع الليلي
- اللغة والعملة

### 3. صفحة المساعدة (`help.tsx`)

#### الميزات الجديدة:
- **قسم ترحيبي**: مع أيقونة ورسالة ترحيب
- **البحث السريع**: إمكانية البحث في المساعدة
- **تصفية حسب الفئة**: تصفية الأسئلة الشائعة
- **أسئلة شائعة قابلة للتوسيع**: مع إجابات مفصلة
- **قسم التواصل**: للتواصل مع الدعم الفني
- **إجراءات سريعة**: روابط سريعة للميزات المهمة

#### الفئات المدعومة:
- المنتجات
- الطلبات
- الحساب
- الدعم
- التقارير

## قاعدة البيانات

### جدول `user_settings` الجديد:
```sql
CREATE TABLE user_settings (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id),
    notifications_enabled BOOLEAN DEFAULT true,
    email_notifications BOOLEAN DEFAULT true,
    push_notifications BOOLEAN DEFAULT true,
    auto_backup BOOLEAN DEFAULT false,
    dark_mode BOOLEAN DEFAULT false,
    language VARCHAR(10) DEFAULT 'ar',
    currency VARCHAR(10) DEFAULT 'IQD',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### الأمان:
- تم تفعيل RLS (Row Level Security)
- سياسات أمان لحماية بيانات المستخدمين
- تحديث تلقائي لـ `updated_at`

## التصميم

### الألوان المستخدمة:
- **اللون الرئيسي**: `#40E0D0` (تركوازي)
- **الخلفية**: `#f8f9fa` (رمادي فاتح)
- **النصوص**: `#333` (داكن) و `#666` (رمادي)
- **الأزرار**: تركوازي مع ظلال

### العناصر المشتركة:
- **Header**: مع زر العودة والعنوان
- **Cards**: تصميم موحد للبطاقات مع ظلال
- **Buttons**: أزرار تفاعلية مع أيقونات
- **Inputs**: حقول إدخال محسنة
- **Switches**: مفاتيح تبديل للخيارات

## الملفات المحدثة

### الملفات الجديدة:
1. `walcard/app/store-owner/(modals)/settings.tsx` - صفحة الإعدادات
2. `walcard/user-settings-table.sql` - جدول إعدادات المستخدم

### الملفات المحدثة:
1. `walcard/app/store-owner/(modals)/edit-profile.tsx` - صفحة تعديل الملف الشخصي
2. `walcard/app/store-owner/(modals)/help.tsx` - صفحة المساعدة

## خطوات التطبيق

### 1. إنشاء جدول قاعدة البيانات:
```bash
# تشغيل ملف SQL في Supabase
psql -h your-supabase-host -U postgres -d postgres -f user-settings-table.sql
```

### 2. اختبار الصفحات:
- فتح صفحة تعديل الملف الشخصي
- اختبار تحميل وحفظ البيانات
- فتح صفحة الإعدادات
- اختبار تغيير الإعدادات
- فتح صفحة المساعدة
- اختبار تصفية الأسئلة الشائعة

### 3. التحقق من الوظائف:
- تحميل البيانات من قاعدة البيانات
- حفظ التغييرات
- عرض رسائل الخطأ والنجاح
- التنقل بين الصفحات

## الميزات المستقبلية

### صفحة تعديل الملف الشخصي:
- رفع صورة المحل
- اختيار أوقات العمل من قائمة
- اختيار المدينة والمنطقة من قوائم
- معاينة الصورة قبل الحفظ

### صفحة الإعدادات:
- إعدادات إضافية للأمان
- تخصيص الواجهة
- إعدادات الإشعارات المتقدمة
- تصدير واستيراد الإعدادات

### صفحة المساعدة:
- بحث متقدم في المحتوى
- فيديوهات تعليمية
- دليل تفاعلي
- نظام تذاكر الدعم

## ملاحظات تقنية

### الأداء:
- تحميل البيانات بشكل متزامن
- حفظ التغييرات فوراً
- معالجة الأخطاء بشكل مناسب
- عرض مؤشرات التحميل

### الأمان:
- التحقق من صحة البيانات
- حماية من SQL Injection
- تشفير البيانات الحساسة
- التحقق من صلاحيات المستخدم

### قابلية الصيانة:
- كود منظم ومعلق
- فصل المنطق عن العرض
- إعادة استخدام المكونات
- توثيق شامل

## الخلاصة

تم تطوير صفحات الإعدادات والمساعدة بشكل كامل مع:
- ربط قاعدة البيانات
- تصميم حديث ومتسق
- واجهة مستخدم محسنة
- وظائف تفاعلية
- أمان عالي
- قابلية للتطوير المستقبلي

جميع الصفحات جاهزة للاستخدام ومرتبطة بقاعدة البيانات بشكل كامل. 