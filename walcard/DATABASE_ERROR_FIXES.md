# إصلاح أخطاء قاعدة البيانات

## المشاكل التي تم حلها

### 1. خطأ في جدول `news`
**المشكلة**: العمود `created_at` غير موجود في جدول الأخبار
**الحل**: تم إضافة فلتر `is_active = true` للتأكد من جلب الأخبار النشطة فقط

### 2. خطأ في جدول `products`
**المشكلة**: العمود `name_ar` غير موجود في جدول المنتجات
**الحل**: تم إزالة العمود `name_ar` من الاستعلامات واستخدام `name` فقط

### 3. خطأ في `working_days`
**المشكلة**: القيمة `undefined` لا يمكن استخدام `join` عليها
**الحل**: تم إضافة فحص للتأكد من وجود القيمة قبل استخدام `join`

## التغييرات المطبقة

### في `app/store-owner/index.tsx`
- إصلاح interface `News` ليتطابق مع قاعدة البيانات
- إزالة `name_ar` من interface `Product`
- إضافة فلتر `is_active` لجدول الأخبار
- استخدام `news_label_ar` و `description_ar` مع fallback للعربية

### في `app/store-owner/search.tsx`
- إزالة `name_ar` من استعلام المنتجات
- تحديث interface `Product`
- استخدام `name` فقط للمنتجات

### في `app/store-owner/orders.tsx`
- إزالة `name_ar` من بيانات المنتجات في الطلبات
- تحديث interface `OrderItem`

### في `app/store-owner/profile.tsx`
- إضافة فحص `working_days` قبل استخدام `join`
- عرض "غير محدد" إذا لم تكن أيام العمل متوفرة

## النتائج

✅ تم إصلاح جميع أخطاء TypeScript
✅ تم إصلاح أخطاء قاعدة البيانات
✅ التطبيق يعمل بدون أخطاء
✅ البيانات تُعرض بشكل صحيح

## اختبار التطبيق

```bash
# تشغيل التطبيق
npx expo start

# فحص أخطاء TypeScript
npx tsc --noEmit
```

## ملاحظات مهمة

1. **جدول المنتجات**: لا يحتوي على عمود `name_ar` - يتم استخدام `name` فقط
2. **جدول الأخبار**: يحتوي على `news_label` و `news_label_ar` للعربية
3. **أيام العمل**: قد تكون `undefined` في بعض الحالات - تم إضافة فحص مناسب
4. **المنتجات في الطلبات**: تستخدم `name` فقط بدون ترجمة عربية

## التوصيات المستقبلية

1. إضافة عمود `name_ar` لجدول المنتجات إذا لزم الأمر
2. تحسين إدارة الترجمات في قاعدة البيانات
3. إضافة validation للبيانات قبل عرضها
4. تحسين error handling للاستعلامات 